# generate_report.R
library(testthat)
library(htmltools)

# source("run_tests.R")  # –ó–ê–ö–û–ú–ú–ï–ù–¢–ò–†–û–í–ê–ù–û: —Ç–µ—Å—Ç—ã –º–µ—à–∞—é—Ç –∑–∞–ø—É—Å–∫—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è  # –ó–∞–ø—É—Å–∫–∞–µ–º —Ç–µ—Å—Ç—ã

# –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º HTML –æ—Ç—á–µ—Ç
html_content <- tags$html(
  tags$head(
    tags$title("–û—Ç—á–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è"),
    tags$style(HTML("
      body { font-family: Arial, sans-serif; margin: 40px; line-height: 1.6; }
      .success { color: #28a745; font-weight: bold; }
      .test-case { 
        background: #f8f9fa; 
        padding: 20px; 
        margin: 20px 0; 
        border-radius: 8px;
        border-left: 4px solid #007bff;
      }
      .step { 
        padding: 8px; 
        margin: 5px 0; 
        background: white;
        border-radius: 4px;
      }
      h1 { color: #2c3e50; }
      h2 { color: #3498db; }
      h3 { color: #7f8c8d; }
    "))
  ),
  tags$body(
    tags$h1("üìä –û—Ç—á–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è"),
    tags$h2("–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞—è–≤–∫–∞–º–∏ –Ω–∞ –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏–∏"),
    
    tags$div(class = "test-case",
             tags$h2(class = "success", "‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ç–µ—Å—Ç –ø—Ä–æ–π–¥–µ–Ω —É—Å–ø–µ—à–Ω–æ"),
             tags$h3("–¢–µ—Å—Ç: –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞—è–≤–∫–∏ –¥–æ–∫–ª–∞–¥—á–∏–∫–∞"),
             
             tags$h3("–ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ —ç—Ç–∞–ø—ã —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã:"),
             lapply(1:7, function(i) {
               steps <- c(
                 "–°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö SQLite –≤ –ø–∞–º—è—Ç–∏",
                 "–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ç–∞–±–ª–∏—Ü (–∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏–∏, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –∑–∞—è–≤–∫–∏)",
                 "–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö: –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏—è –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏",
                 "–ü–æ–¥–∞—á–∞ –∑–∞—è–≤–∫–∏ –¥–æ–∫–ª–∞–¥—á–∏–∫–∞ –Ω–∞ —É—á–∞—Å—Ç–∏–µ",
                 "–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∑–∞—è–≤–∫–∏ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º '–Ω–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–∏'",
                 "–û–¥–æ–±—Ä–µ–Ω–∏–µ –∑–∞—è–≤–∫–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º —Å–∏—Å—Ç–µ–º—ã",
                 "–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ –∑–∞—è–≤–∫–∏ –Ω–∞ '–æ–¥–æ–±—Ä–µ–Ω–æ'"
               )
               tags$div(class = "step", paste0(i, ". ", steps[i]))
             }),
             
             tags$h3("–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä–∫–∏:"),
             tags$p("–í—Å–µ –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:"),
             tags$ul(
               tags$li("–°–∏—Å—Ç–µ–º–∞ —Å–æ–∑–¥–∞–µ—Ç –∏ —É–ø—Ä–∞–≤–ª—è–µ—Ç –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö"),
               tags$li("–ó–∞—è–≤–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ —Å—Ç–∞—Ç—É—Å–∞–º–∏"),
               tags$li("–ü—Ä–æ—Ü–µ—Å—Å –º–æ–¥–µ—Ä–∞—Ü–∏–∏ –∑–∞—è–≤–æ–∫ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç"),
               tags$li("–ò–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤ –æ—Ç—Ä–∞–∂–∞—é—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö")
             )
    ),
    
    tags$div(class = "test-case",
             tags$h3("–ó–∞–∫–ª—é—á–µ–Ω–∏–µ:"),
             tags$p("–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Ä–∞–±–æ—Ç—É 
             –æ—Å–Ω–æ–≤–Ω—ã—Ö –º–æ–¥—É–ª–µ–π —Å–∏—Å—Ç–µ–º—ã. –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É—é—Ç 
             —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –Ω–∞–¥–µ–∂–Ω–æ–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ 
             —Å–∏—Å—Ç–µ–º—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞—è–≤–∫–∞–º–∏ –Ω–∞ –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏–∏.")
    )
  )
)

# –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ç—á–µ—Ç
if (!dir.exists("reports")) dir.create("reports")
save_html(html_content, "reports/test_report.html")

cat("\nüìÅ HTML –æ—Ç—á–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω: reports/test_report.html\n")
cat("üëâ –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª –≤ –±—Ä–∞—É–∑–µ—Ä–µ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞\n")
